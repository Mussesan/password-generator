<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <title>Gerador de Senha</title>
</head>
<body>
    <header>
        <h1>Gerador de Senhas</h1>
        <span>Use este gerador de senhas prático e simples, para obter uma senha forte e segura. Totalmente gratuíto!  </span>
    </header>
    
    <input 
        type="range" 
        value="10" 
        min="4" 
        max="71" 
        id="pswdRange">

    <progress 
        id="progress_bar" 
        value="5" max="100">
    </progress>

    <span id="rangeNumber">10</span>

    <input 
        type="text" 
        value="" 
        readonly 
        id="pswdResult">

    <button id="copyBtn">Copiar senha</button>

    <script>
        //Declaração de variáveis e elementos usados no script
        let passwordRange = 10
        const pswdRangeEl = document.querySelector("#pswdRange")
        const pswdResultEl = document.querySelector("#pswdResult")
        const rangeNumberEl= document.querySelector("#rangeNumber")
        
        // Função que gera uma nova senha aleatória,
        // com o tamanho padrão/base do range que é 10.
        function generatePswd(){
            const chars = "abcdefghjklmnopqrstuvwxyzABCDEFGHJKLMNOPQRSTUVWXYZ0123456789?!@#$&()[]_"
            let password = ""
            for (let i = 0; i < passwordRange; i++) {
                const randomNumber = Math.floor(Math.random()*chars.length)
                password += chars.substring(randomNumber,randomNumber+1)
                pswdResultEl.value = password
            }
            console.log(password) //consoleda senha
        }

        // Aqui sempre que movimentamos o range, 
        // uma nova senha com o tamanho atual do range é gerada.
        pswdRangeEl.addEventListener('input',function(){
            rangeNumberEl.innerHTML = pswdRangeEl.value
            passwordRange = pswdRangeEl.value
            generatePswd()
        })
        
        function copy() {
            navigator.clipboard.writeText(pswdResultEl.value)
            alert('\nSenha copiada para área de transferência.\n\nESC para fechar.')
            
        }

        const copyBtnEl = document.querySelector("#copyBtn")
        copyBtnEl.addEventListener('click', copy)

        // ela ser exibida com uma senha inicial gerada.
        generatePswd()
    </script>
</body>
</html>